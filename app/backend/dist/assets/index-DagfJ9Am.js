import{j as e,a as Z,r as c,M as m,B as p,A as _,b as ee,S as te,u as V,L as J,m as y,D as K,f as T,h as L,c as ae,C as se,R as re,d as R,e as ne,g as le}from"./vendor-BEnB0HLB.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();const oe="/assets/logo-CM-wqqU6.jpg",ie=()=>e.jsx("div",{className:"p-3 text-center logo",children:e.jsx("img",{src:oe,alt:"CottageLogo",className:"img-fluid"})}),S=Z.create({baseURL:"api",headers:{"Content-Type":"application/json"}});class ce{async getItems(){return S.get("/items").then(a=>a.data)}async addItem(a){return S.post("/items",a).then(s=>s.data).catch(this.parseError)}async updateItem(a){return S.put(`/items/${a.id}`,a).then(s=>s.data).catch(this.parseError)}async deleteItem(a){return S.delete(`/items/${a}`)}parseError(a){const s=a.response?.data.errors;if(s){let l="";throw Object.keys(s).forEach(r=>{l+=s[r]+`
`}),Error(l)}else throw Error(a.response?.data)}}const M=new ce,de=(t,a)=>{const s=t.trim().toLowerCase();return t.trim()===""?"Nimi ei voi olla tyhjä":t.length<2||t.length>30?"Nimen pitää olla vähintään 2-30 merkkiä":a.includes(s)?"Nimi on jo listassa":""},Y=(t,a)=>t.length>a?`Kommentti voi olla enintään ${a} merkkiä`:"",z=(t,a,s)=>{const[l,r]=c.useState(""),[n,h]=c.useState(""),[u,i]=c.useState(!1),o=100;return c.useEffect(()=>{const v=s.map(x=>x.toLowerCase());r(de(t,v)),h(Y(a,o))},[t,a,s]),{nameError:l,commentError:n,formSubmitted:u,setFormSubmitted:i}};var C=(t=>(t[t.Paljon=1]="Paljon",t[t.Löytyy=2]="Löytyy",t[t.Lopussa=3]="Lopussa",t[t["?"]=4]="?",t))(C||{}),k=(t=>(t[t.Kuivaruoka=1]="Kuivaruoka",t[t.Jääkaappi=2]="Jääkaappi",t[t.Juomat=3]="Juomat",t[t.Pakastin=4]="Pakastin",t[t.Muut=5]="Muut",t))(k||{}),E=(t=>(t[t["#BB0C0C"]=1]="#BB0C0C",t[t.green=2]="green",t))(E||{});const ue=t=>{const[a,s]=c.useState({name:t.selectedItem?.name??"",status:t.selectedItem?.status??C["?"],comment:t.selectedItem?.comment??"",category:t.selectedItem?.category??k.Muut}),{nameError:l,commentError:r,formSubmitted:n,setFormSubmitted:h}=z(a.name,a.comment,t.items.filter(o=>o.id!==t.selectedItem?.id).map(o=>o.name)),u=async()=>{if(t.selectedItem&&(h(!0),l.length<1&&r.length<1))try{i(t.selectedItem.id),t.setShowModal(!1)}catch(o){console.error("Error updating item:",o),t.setError("Muokkaus ei onnistunut")}},i=async o=>{const v={...a,id:o,updatedOn:t.selectedItem?.updatedOn},x=await M.updateItem(v),b=t.items.map(f=>f.id===o?x:f);t.setItems(b)};return e.jsxs(m,{show:!0,onHide:()=>t.setShowModal(!1),"aria-labelledby":"edit-item-modal",children:[e.jsx(m.Header,{closeButton:!0,children:e.jsx(m.Title,{id:"edit-item-modal",children:"Muokkaa"})}),e.jsxs(m.Body,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name-input",children:"Nimi"}),e.jsx("input",{type:"text",id:"name-input",className:"form-control",value:a.name,onChange:o=>s({...a,name:o.target.value})}),l&&n&&e.jsx("span",{className:"text-danger",children:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"status",children:"Jäljellä"}),e.jsx("select",{id:"status",className:"form-control",value:a.status,onChange:o=>s({...a,status:Number(o.target.value)}),children:Object.entries(C).filter(([o])=>isNaN(Number(o))).map(([o,v])=>e.jsx("option",{value:v,children:o},o))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"comment-input",children:"Kommentti"}),e.jsx("input",{type:"string",id:"comment-input",className:"form-control",value:a.comment,onChange:o=>s({...a,comment:o.target.value})}),r&&n&&e.jsx("span",{className:"text-danger",children:r})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"category",children:"Kategoria"}),e.jsx("select",{id:"category",className:"form-control",value:a.category,onChange:o=>s({...a,category:Number(o.target.value)}),children:Object.entries(k).filter(([o])=>isNaN(Number(o))).map(([o,v])=>e.jsx("option",{value:v,children:o},o))})]})]}),e.jsxs(m.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>t.setShowModal(!1),"aria-label":"Cancel",children:"Peruuta"}),e.jsx(p,{variant:"primary",onClick:u,"aria-label":`Save changes on ${t.selectedItem?.name}`,children:"Tallenna"})]})]})},me=t=>{const a=async()=>{if(t.selectedItem)try{await s(t.selectedItem.id),t.setShowModal(!1)}catch(l){console.error("Error deleting item:",l),t.setError("Poistaminen ei onnistunut")}},s=async l=>{await M.deleteItem(l);const r=t.items.filter(n=>n.id!==l);t.setItems(r)};return e.jsx("div",{children:e.jsxs(m,{show:!0,onHide:()=>t.setShowModal(!1),"aria-labelledby":"delete-item-modal",children:[e.jsx(m.Header,{closeButton:!0,children:e.jsx(m.Title,{id:"delete-item-modal",children:"Poista"})}),e.jsx(m.Body,{children:e.jsxs("p",{children:["Haluatko varmasti poistaa ",t.selectedItem?.name,"?"]})}),e.jsxs(m.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>t.setShowModal(!1),"aria-label":"Cancel",children:"Peruuta"}),e.jsx(p,{variant:"danger",onClick:a,"aria-label":`Delete ${t.selectedItem?.name}`,children:"Poista"})]})]})})},he=t=>{const[a,s]=c.useState({name:"",status:C["?"],comment:"",category:k.Muut}),{nameError:l,commentError:r,formSubmitted:n,setFormSubmitted:h}=z(a.name,a.comment,t.items.map(i=>i.name)),u=async()=>{if(h(!0),l.length<1&&r.length<1)try{const i=await M.addItem(a);t.setItems([...t.items,i]),t.setShowModal(!1)}catch(i){console.error("Error adding item:",i),t.setError("Lisäys ei onnistunut")}};return e.jsxs(m,{show:!0,onHide:()=>t.setShowModal(!1),"aria-labelledby":"add-item-modal",children:[e.jsx(m.Header,{closeButton:!0,children:e.jsx(m.Title,{id:"add-item-modal",children:"Lisää"})}),e.jsxs(m.Body,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name-input",children:"Nimi"}),e.jsx("input",{type:"text",id:"name-input",className:"form-control",value:a.name,onChange:i=>s({...a,name:i.target.value})}),l&&n&&e.jsx("span",{className:"text-danger",children:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"status",children:"Jäljellä"}),e.jsx("select",{id:"status",className:"form-control",value:a.status,onChange:i=>s({...a,status:Number(i.target.value)}),children:Object.entries(C).filter(([i])=>isNaN(Number(i))).map(([i,o])=>e.jsx("option",{value:o,children:i},i))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"comment-input",children:"Kommentti"}),e.jsx("input",{type:"text",id:"comment-input",className:"form-control",value:a.comment,onChange:i=>s({...a,comment:i.target.value})}),r&&n&&e.jsx("span",{className:"text-danger",children:r})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"category",children:"Kategoria"}),e.jsx("select",{id:"category",className:"form-control",value:a.category,onChange:i=>s({...a,category:Number(i.target.value)}),children:Object.entries(k).filter(([i])=>isNaN(Number(i))).map(([i,o])=>e.jsx("option",{value:o,children:i},i))})]})]}),e.jsxs(m.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>t.setShowModal(!1),"aria-label":"Cancel",children:"Peruuta"}),e.jsx(p,{variant:"primary",onClick:u,"aria-label":"Save",children:"Tallenna"})]})]})},xe=({selectedStatus:t,setSelectedStatus:a})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:"statusFilter"}),e.jsxs("select",{id:"statusFilter",value:t||"",onChange:s=>a(s.target.value?parseInt(s.target.value,10):null),children:[e.jsx("option",{value:"",children:"Kaikki"}),Object.entries(C).filter(([s])=>isNaN(Number(s))).map(([s,l])=>e.jsx("option",{value:l,children:s},s))]})]}),je=({selectedCategory:t,setSelectedCategory:a})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:"categoryFilter","aria-label":"Select category"}),e.jsxs("select",{id:"categoryFilter",value:t||"",onChange:s=>a(s.target.value?parseInt(s.target.value,10):null),children:[e.jsx("option",{value:"",children:"Kaikki"}),Object.entries(k).filter(([s])=>isNaN(Number(s))).map(([s,l])=>e.jsx("option",{value:l,children:s},s))]})]}),fe=({item:t,handleStatusUpdate:a,handleCommentChange:s,handleEdit:l,handleDelete:r})=>{const n=c.useRef(null);c.useEffect(()=>{n.current&&(n.current.value=t.comment||"")},[t.comment]);const h=()=>{n.current&&s(t,n.current.value)};return e.jsxs("tr",{tabIndex:0,children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:e.jsx(p,{onClick:()=>a(t),variant:t.status===1?"primary":t.status===2?"warning":t.status===3?"danger":"",className:"btn-sm",children:C[t.status]})}),e.jsx("td",{children:e.jsx("input",{type:"text",defaultValue:t.comment||"",ref:n,onBlur:h,onKeyDown:u=>{u.key==="Enter"&&(u.currentTarget.blur(),h())},className:"comment-input"})}),e.jsx("td",{children:new Date(t.updatedOn??"").toLocaleDateString("fi-FI")}),e.jsx("td",{children:k[t.category]}),e.jsx("td",{children:e.jsx(_,{tabIndex:0,className:"edit-icon",onClick:()=>l(t),onKeyDown:u=>{u.key==="Enter"&&l(t)},"aria-label":`Muokkaa ${t.name}`})}),e.jsx("td",{children:e.jsx(ee,{tabIndex:0,className:"delete-icon",onClick:()=>r(t),onKeyDown:u=>{u.key==="Enter"&&r(t)},"aria-label":`Poista ${t.name}`})})]})},U=({errorMessage:t,onClose:a})=>{const s=()=>{a()};return e.jsxs(m,{show:!0,onHide:s,children:[e.jsx(m.Header,{closeButton:!0,children:e.jsx(m.Title,{children:"Oho! Jotain meni vikaan"})}),e.jsx(m.Body,{children:t}),e.jsx(m.Footer,{children:e.jsx(p,{variant:"secondary",onClick:s,"aria-label":"Close error modal",children:"Sulje"})})]})},q=()=>e.jsx("div",{className:"container d-flex justify-content-center align-items-center",children:e.jsx(te,{animation:"border",variant:"primary",role:"status","aria-label":"Loading..."})}),ve=()=>{const[t,a]=c.useState([]),[s,l]=c.useState(null),[r,n]=c.useState(!1),[h,u]=c.useState(!1),[i,o]=c.useState(!1),[v,x]=c.useState(null),[b,f]=c.useState(null),[I,B]=c.useState(!1),[P,d]=c.useState(null);c.useEffect(()=>{g()},[]);const g=async()=>{B(!0);try{const j=await M.getItems();console.log("Fetched items:",j),a(j)}catch(j){console.error("Error fetching items:",j),d("Inventaarion haku ei onnistunut")}finally{B(!1)}},w=j=>{l(j),u(!0)},N=j=>{l(j),o(!0)},X=async j=>{try{const F=j.status%4+1,H={...j,status:F};await M.updateItem(H);const O=t.map($=>$.id===j.id?H:$);a(O)}catch(D){console.error("Error updating status:",D),d("Statuksen päivitys ei onnistunut")}},Q=async(j,D)=>{try{const F={...j,comment:D};await M.updateItem(F);const H=t.map(O=>O.id===j.id?{...O,comment:D}:O);a(H)}catch(F){console.error("Error updating status:",F),d("Kommentin päivitys ei onnistunut")}};return I?e.jsx(q,{}):e.jsxs("div",{className:"container",children:[e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Nimi"}),e.jsxs("th",{scope:"col",children:[e.jsx(xe,{"aria-label":"Choose status filter",selectedStatus:b,setSelectedStatus:f}),"Jäljellä"]}),e.jsx("th",{scope:"col",children:"Kommentti"}),e.jsx("th",{scope:"col",children:"Muokattu"}),e.jsxs("th",{scope:"col",children:[e.jsx(je,{"aria-label":"Choose category filter",selectedCategory:v,setSelectedCategory:x}),"Kategoria"]}),e.jsx("th",{scope:"col"}),e.jsx("th",{scope:"col",children:e.jsx(p,{className:"btn-sm",onClick:()=>n(!0),"aria-label":"Add new",children:"Lisää"})})]})}),e.jsx("tbody",{children:t.sort((j,D)=>j.name.localeCompare(D.name)).map(j=>(v===null||j.category===v)&&(b===null||j.status===b)?e.jsx(fe,{item:j,handleStatusUpdate:X,handleCommentChange:Q,handleEdit:w,handleDelete:N},j.id):null)})]}),e.jsxs("div",{children:[P&&e.jsx(U,{"aria-label":"Show error modal",errorMessage:P,onClose:()=>d(null)}),r&&e.jsx(he,{"aria-label":"Add new item modal",selectedItem:null,items:t,setItems:a,setShowModal:n,setError:d}),h&&e.jsx(ue,{"aria-label":"Edit item modal",selectedItem:s,items:t,setItems:a,setShowModal:u,setError:d}),i&&e.jsx(me,{"aria-label":"Delete item modal",selectedItem:s,items:t,setItems:a,setShowModal:o,setError:d})]})]})},ge=()=>{const t=V("/"),a=V("/calendar");return e.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark","aria-label":"Main navigation",children:e.jsx("div",{className:"container",children:e.jsxs("ul",{className:"nav nav-tabs justify-content-center",children:[e.jsx("li",{className:"nav-item",children:e.jsx(J,{className:`nav-link ${t?"active":""}`,to:"/","aria-current":t?"page":void 0,children:"Inventaario"})}),e.jsx("li",{className:"nav-item",children:e.jsx(J,{className:`nav-link ${a?"active":""}`,to:"/calendar","aria-current":a?"page":void 0,children:"Kalenteri"})})]})})})};class pe{async getCalendarEvents(){return S.get("/calendar-events").then(a=>a.data)}async addCalendarEvent(a){return S.post("/calendar-events",a).then(s=>s.data).catch(this.parseError)}async updateCalendarEvent(a){return S.put(`/calendar-events/${a.id}`,a).then(s=>s.data).catch(this.parseError)}async deleteCalendarEvent(a){return S.delete(`/calendar-events/${a}`)}parseError(a){const s=a.response?.data.errors;if(s){let l="";throw Object.keys(s).forEach(r=>{l+=s[r]+`
`}),Error(l)}else throw Error(a.response?.data)}}const A=new pe,ye=(t,a)=>a<t?"Lähtöpäivä ei voi olla ennen saapumista":"",G=(t,a,s)=>{const[l,r]=c.useState(""),[n,h]=c.useState(""),[u,i]=c.useState(!1),o=200;return c.useEffect(()=>{r(ye(t,a)),h(Y(s,o))},[t,a,s]),{dateError:l,commentError:n,formSubmitted:u,setFormSubmitted:i}},be=({slotInfo:t,onClose:a,onSave:s,setError:l})=>{const[r,n]=c.useState({startDate:y(t.start).startOf("day").add(12,"hours").toDate(),endDate:y(t.end).startOf("day").add(12,"hours").toDate(),note:"",color:E.green}),{dateError:h,commentError:u,formSubmitted:i,setFormSubmitted:o}=G(r.startDate,r.endDate,r.note),v=async()=>{if(o(!0),h.length<1&&u.length<1)try{const x=await A.addCalendarEvent(r);s(x)}catch(x){console.error("Error adding event:",x),l("Lisäys ei onnistunut")}};return e.jsxs(m,{show:!0,onHide:a,children:[e.jsx(m.Header,{closeButton:!0,children:e.jsx(m.Title,{children:"Lisää uusi mökkireissu"})}),e.jsxs(m.Body,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"startDate",children:"Saapumispäivä"}),e.jsx("div",{children:e.jsx(K,{selected:r.startDate,dateFormat:"dd.MM.yyyy",locale:T,onChange:x=>n({...r,startDate:y(x).tz("Europe/Helsinki").startOf("day").add(12,"hours").toDate()}),calendarStartDay:1})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"endDate",children:"Lähtöpäivä"}),e.jsx("div",{children:e.jsx(K,{selected:r.endDate,dateFormat:"dd.MM.yyyy",locale:T,onChange:x=>n({...r,endDate:y(x).tz("Europe/Helsinki").startOf("day").add(12,"hours").toDate()})})}),h&&i&&e.jsx("span",{className:"text-danger",children:h})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"note",children:"Nimi"}),e.jsx("input",{id:"note",type:"text",className:"form-control",value:r.note,onChange:x=>n({...r,note:x.target.value})}),u&&i&&e.jsx("span",{className:"text-danger",children:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"color",children:"Väri"}),e.jsxs("select",{id:"color",className:"form-control",value:r.color,onChange:x=>n({...r,color:Number(x.target.value)}),children:[e.jsx("option",{value:E["#BB0C0C"],children:"Punainen - Varattu"}),e.jsx("option",{value:E.green,children:"Vihreä - Saa tulla mukaan"})]})]})]}),e.jsxs(m.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:a,"aria-label":"Cancel",children:"Peruuta"}),e.jsx(p,{variant:"primary",onClick:v,"aria-label":"Save",children:"Tallenna"})]})]})},Ne=({event:t,onClose:a,onSave:s,onDelete:l,setError:r})=>{const[n,h]=c.useState({startDate:y(t.startDate).startOf("day").add(12,"hours").toDate(),endDate:y(t.endDate).startOf("day").add(12,"hours").toDate(),note:t.note,color:t.color}),{dateError:u,commentError:i,formSubmitted:o,setFormSubmitted:v}=G(n.startDate,n.endDate,n.note);c.useEffect(()=>{h({startDate:y(t.startDate).startOf("day").add(12,"hours").toDate(),endDate:y(t.endDate).startOf("day").add(12,"hours").toDate(),note:t.note,color:t.color})},[t]);const x=async()=>{if(v(!0),u.length<1&&i.length<1)try{const f={...t,...n},I=await A.updateCalendarEvent(f);s(t,I)}catch(f){console.error("Error updating event:",f),r("Muokkaus ei onnistunut")}},b=async()=>{try{await A.deleteCalendarEvent(t.id),l(t)}catch(f){console.error("Error deleting event:",f),r("Poisto ei onnistunut")}};return e.jsxs(m,{show:!0,onHide:a,children:[e.jsx(m.Header,{closeButton:!0,children:e.jsx(m.Title,{children:"Muokkaa"})}),e.jsxs(m.Body,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"startDate",children:"Saapumispäivä"}),e.jsx("div",{children:e.jsx(K,{selected:n.startDate,dateFormat:"dd.MM.yyyy",locale:T,onChange:f=>h({...n,startDate:y(f).tz("Europe/Helsinki").startOf("day").add(12,"hours").toDate()}),calendarStartDay:1})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"endDate",children:"Lähtöpäivä"}),e.jsx("div",{children:e.jsx(K,{selected:n.endDate,dateFormat:"dd.MM.yyyy",locale:T,onChange:f=>h({...n,endDate:y(f).tz("Europe/Helsinki").startOf("day").add(12,"hours").toDate()})})}),u&&o&&e.jsx("span",{className:"text-danger",children:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"note",children:"Nimi"}),e.jsx("input",{id:"note",type:"text",className:"form-control",value:n.note,onChange:f=>h({...n,note:f.target.value})}),i&&o&&e.jsx("span",{className:"text-danger",children:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"color",children:"Väri"}),e.jsxs("select",{id:"color",className:"form-control",value:n.color,onChange:f=>h({...n,color:Number(f.target.value)}),children:[e.jsx("option",{value:E["#BB0C0C"],children:"Punainen - Varattu"}),e.jsx("option",{value:E.green,children:"Vihreä - Saa tulla mukaan"})]})]})]}),e.jsxs(m.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:a,"aria-label":"Cancel",children:"Peruuta"}),e.jsx(p,{variant:"danger",onClick:b,"aria-label":"Delete",children:"Poista"}),e.jsx(p,{variant:"primary",onClick:x,"aria-label":"Save",children:"Tallenna"})]})]})},Se=t=>{const{date:a,onNavigate:s}=t,l=L(a).format("MMMM"),r=L(a).format("YYYY");return e.jsx("div",{className:"rbc-toolbar",children:e.jsxs("div",{className:"toolbar-container",children:[e.jsx("button",{onClick:()=>s("PREV"),"aria-label":"Previous Month",children:"<<"}),e.jsxs("span",{className:"toolbar-label",children:[l," ",r]}),e.jsx("button",{onClick:()=>s("NEXT"),"aria-label":"Next Month",children:">>"})]})})};L.tz.setDefault("Europe/Helsinki");const W=ae(L);W.segmentOffset=0;const De=()=>{const[t,a]=c.useState([]),[s,l]=c.useState(null),[r,n]=c.useState(null),[h,u]=c.useState(null),[i,o]=c.useState(!1),[v,x]=c.useState(null);c.useEffect(()=>{b()},[]);const b=async()=>{o(!0);try{const d=await A.getCalendarEvents();a(d);let g=null;d.forEach(w=>{const N=w.updatedOn?new Date(w.updatedOn):null;N&&(!g||N>g)&&(g=N)}),u(g)}catch(d){console.error(d),x("Kalenterin haku ei onnistunut")}finally{o(!1)}},f=d=>{n(d)},I=d=>{l(d)},B=(d,g)=>{const w={...g,startDate:new Date(g.startDate),endDate:new Date(g.endDate),updatedOn:new Date};a(t.map(N=>N.id===d.id?w:N)),u(new Date),l(null)},P=d=>{a(t.filter(g=>g.id!==d.id)),u(new Date),l(null)};return i?e.jsx(q,{}):e.jsxs("div",{className:"container",children:[e.jsx(se,{views:["month"],messages:{next:"Seuraava kuukausi >>",previous:"<< Edellinen kuukausi",today:"Tänään",month:"Kuukausi"},localizer:W,events:t.map(d=>({...d,title:d.note})),startAccessor:d=>d.startDate,endAccessor:d=>d.endDate,style:{height:500,cursor:"pointer"},eventPropGetter:d=>({style:{backgroundColor:E[d.color],height:"30px"}}),selectable:!0,onSelectSlot:f,onSelectEvent:I,components:{toolbar:Se}}),v&&e.jsx(U,{errorMessage:v,onClose:()=>x(null)}),r&&e.jsx(be,{slotInfo:r,onClose:()=>n(null),onSave:d=>{a(g=>[...g,d]),u(new Date(d.updatedOn)),n(null)},setError:x}),s&&e.jsx(Ne,{event:s,onClose:()=>l(null),onSave:B,onDelete:P,setError:x}),e.jsx("div",{className:"container",children:e.jsxs("p",{children:["Muokattu:"," ",h?L(h).format("DD/MM/YYYY HH:mm"):"?"]})})]})},Ee=()=>e.jsxs(e.Fragment,{children:[e.jsx(ie,{}),e.jsxs("div",{children:[e.jsx(ge,{}),e.jsxs(re,{children:[e.jsx(R,{path:"/",element:e.jsx(ve,{})}),e.jsx(R,{path:"/calendar",element:e.jsx(De,{})})]})]})]});ne.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(le,{children:e.jsx(Ee,{})})}));
//# sourceMappingURL=index-DagfJ9Am.js.map
